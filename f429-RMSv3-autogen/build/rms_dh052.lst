ARM GAS  /tmp/cczxgOAQ.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"rms_dh052.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.servo_Init,"ax",%progbits
  20              		.align	1
  21              		.global	servo_Init
  22              		.syntax unified
  23              		.thumb
  24              		.thumb_func
  26              	servo_Init:
  27              	.LVL0:
  28              	.LFB130:
  29              		.file 1 "../rms_self/src/rms_dh052.c"
   1:../rms_self/src/rms_dh052.c **** #include "dh052_internal.h"
   2:../rms_self/src/rms_dh052.c **** 
   3:../rms_self/src/rms_dh052.c **** /******************************* Aliases **************************************/
   4:../rms_self/src/rms_dh052.c **** /* 
   5:../rms_self/src/rms_dh052.c ****    "ONE_PERIOD" is this value because the counter counts on "both" edges of both 
   6:../rms_self/src/rms_dh052.c ****    channels. Hence, a single count is pulsed 4 times for greater accuracy. Thats 
   7:../rms_self/src/rms_dh052.c ****    why it's divided by 4.
   8:../rms_self/src/rms_dh052.c **** */ 
   9:../rms_self/src/rms_dh052.c **** #define ONE_PERIOD 16384  
  10:../rms_self/src/rms_dh052.c **** #define HALF_PERIOD 8192
  11:../rms_self/src/rms_dh052.c **** #define MIN_TO_MS 60000UL
  12:../rms_self/src/rms_dh052.c **** #define IDLE 0
  13:../rms_self/src/rms_dh052.c **** #define BUSY 1
  14:../rms_self/src/rms_dh052.c **** 
  15:../rms_self/src/rms_dh052.c **** /****************************** Global Variables ******************************/
  16:../rms_self/src/rms_dh052.c **** static int32_t g_prev = 0;
  17:../rms_self/src/rms_dh052.c **** static uint16_t g_rpm = 0;
  18:../rms_self/src/rms_dh052.c **** static uint8_t g_ic_state = IDLE;
  19:../rms_self/src/rms_dh052.c **** static uint16_t g_dif = 0;
  20:../rms_self/src/rms_dh052.c **** static volatile uint16_t g_ts1 = 0, g_ts2 = 0;
  21:../rms_self/src/rms_dh052.c **** 
  22:../rms_self/src/rms_dh052.c **** void servo_Init(Motor *handle,TIM_HandleTypeDef *pwm_tim_h , uint8_t lpwm_ch, uint8_t rpwm_ch, GPIO
  23:../rms_self/src/rms_dh052.c **** {
  30              		.loc 1 23 1 view -0
  31              		.cfi_startproc
  32              		@ args = 20, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		@ link register save eliminated.
  24:../rms_self/src/rms_dh052.c ****     handle->pwm_tim_h = pwm_tim_h;
ARM GAS  /tmp/cczxgOAQ.s 			page 2


  35              		.loc 1 24 5 view .LVU1
  36              		.loc 1 24 23 is_stmt 0 view .LVU2
  37 0000 0160     		str	r1, [r0]
  25:../rms_self/src/rms_dh052.c ****     handle->port = port;
  38              		.loc 1 25 5 is_stmt 1 view .LVU3
  39              		.loc 1 25 18 is_stmt 0 view .LVU4
  40 0002 0099     		ldr	r1, [sp]
  41              	.LVL1:
  42              		.loc 1 25 18 view .LVU5
  43 0004 8160     		str	r1, [r0, #8]
  26:../rms_self/src/rms_dh052.c ****     handle->l_en = l_en;
  44              		.loc 1 26 5 is_stmt 1 view .LVU6
  45              		.loc 1 26 18 is_stmt 0 view .LVU7
  46 0006 BDF80410 		ldrh	r1, [sp, #4]
  47 000a 8181     		strh	r1, [r0, #12]	@ movhi
  27:../rms_self/src/rms_dh052.c ****     handle->r_en = r_en;
  48              		.loc 1 27 5 is_stmt 1 view .LVU8
  49              		.loc 1 27 18 is_stmt 0 view .LVU9
  50 000c BDF80810 		ldrh	r1, [sp, #8]
  51 0010 C181     		strh	r1, [r0, #14]	@ movhi
  28:../rms_self/src/rms_dh052.c ****     handle->lpwm_ch = lpwm_ch;
  52              		.loc 1 28 5 is_stmt 1 view .LVU10
  53              		.loc 1 28 21 is_stmt 0 view .LVU11
  54 0012 0271     		strb	r2, [r0, #4]
  29:../rms_self/src/rms_dh052.c ****     handle->rpwm_ch = rpwm_ch;
  55              		.loc 1 29 5 is_stmt 1 view .LVU12
  56              		.loc 1 29 21 is_stmt 0 view .LVU13
  57 0014 4371     		strb	r3, [r0, #5]
  30:../rms_self/src/rms_dh052.c ****     handle->enc_tim_h = enc_tim_h;
  58              		.loc 1 30 5 is_stmt 1 view .LVU14
  59              		.loc 1 30 23 is_stmt 0 view .LVU15
  60 0016 039B     		ldr	r3, [sp, #12]
  61              	.LVL2:
  62              		.loc 1 30 23 view .LVU16
  63 0018 0361     		str	r3, [r0, #16]
  31:../rms_self/src/rms_dh052.c ****     handle->enc_ic_tim_h = enc_ic_tim_h;
  64              		.loc 1 31 5 is_stmt 1 view .LVU17
  65              		.loc 1 31 26 is_stmt 0 view .LVU18
  66 001a 049B     		ldr	r3, [sp, #16]
  67 001c 4361     		str	r3, [r0, #20]
  32:../rms_self/src/rms_dh052.c **** }
  68              		.loc 1 32 1 view .LVU19
  69 001e 7047     		bx	lr
  70              		.cfi_endproc
  71              	.LFE130:
  73              		.section	.text.servo_enable,"ax",%progbits
  74              		.align	1
  75              		.global	servo_enable
  76              		.syntax unified
  77              		.thumb
  78              		.thumb_func
  80              	servo_enable:
  81              	.LVL3:
  82              	.LFB131:
  33:../rms_self/src/rms_dh052.c **** 
  34:../rms_self/src/rms_dh052.c **** void servo_enable(Motor const *handle)
  35:../rms_self/src/rms_dh052.c **** {   
ARM GAS  /tmp/cczxgOAQ.s 			page 3


  83              		.loc 1 35 1 is_stmt 1 view -0
  84              		.cfi_startproc
  85              		@ args = 0, pretend = 0, frame = 0
  86              		@ frame_needed = 0, uses_anonymous_args = 0
  87              		.loc 1 35 1 is_stmt 0 view .LVU21
  88 0000 10B5     		push	{r4, lr}
  89              	.LCFI0:
  90              		.cfi_def_cfa_offset 8
  91              		.cfi_offset 4, -8
  92              		.cfi_offset 14, -4
  93 0002 0446     		mov	r4, r0
  36:../rms_self/src/rms_dh052.c ****     HAL_GPIO_WritePin(handle->port, handle->l_en, 1);
  94              		.loc 1 36 5 is_stmt 1 view .LVU22
  95 0004 0122     		movs	r2, #1
  96 0006 8189     		ldrh	r1, [r0, #12]
  97 0008 8068     		ldr	r0, [r0, #8]
  98              	.LVL4:
  99              		.loc 1 36 5 is_stmt 0 view .LVU23
 100 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 101              	.LVL5:
  37:../rms_self/src/rms_dh052.c ****     HAL_GPIO_WritePin(handle->port, handle->r_en, 1);
 102              		.loc 1 37 5 is_stmt 1 view .LVU24
 103 000e 0122     		movs	r2, #1
 104 0010 E189     		ldrh	r1, [r4, #14]
 105 0012 A068     		ldr	r0, [r4, #8]
 106 0014 FFF7FEFF 		bl	HAL_GPIO_WritePin
 107              	.LVL6:
  38:../rms_self/src/rms_dh052.c **** }
 108              		.loc 1 38 1 is_stmt 0 view .LVU25
 109 0018 10BD     		pop	{r4, pc}
 110              		.loc 1 38 1 view .LVU26
 111              		.cfi_endproc
 112              	.LFE131:
 114              		.section	.text.servo_disable,"ax",%progbits
 115              		.align	1
 116              		.global	servo_disable
 117              		.syntax unified
 118              		.thumb
 119              		.thumb_func
 121              	servo_disable:
 122              	.LVL7:
 123              	.LFB132:
  39:../rms_self/src/rms_dh052.c **** 
  40:../rms_self/src/rms_dh052.c **** void servo_disable(Motor const *handle)
  41:../rms_self/src/rms_dh052.c **** {   
 124              		.loc 1 41 1 is_stmt 1 view -0
 125              		.cfi_startproc
 126              		@ args = 0, pretend = 0, frame = 0
 127              		@ frame_needed = 0, uses_anonymous_args = 0
 128              		.loc 1 41 1 is_stmt 0 view .LVU28
 129 0000 10B5     		push	{r4, lr}
 130              	.LCFI1:
 131              		.cfi_def_cfa_offset 8
 132              		.cfi_offset 4, -8
 133              		.cfi_offset 14, -4
 134 0002 0446     		mov	r4, r0
  42:../rms_self/src/rms_dh052.c ****     HAL_GPIO_WritePin(handle->port, handle->l_en, 0);
ARM GAS  /tmp/cczxgOAQ.s 			page 4


 135              		.loc 1 42 5 is_stmt 1 view .LVU29
 136 0004 0022     		movs	r2, #0
 137 0006 8189     		ldrh	r1, [r0, #12]
 138 0008 8068     		ldr	r0, [r0, #8]
 139              	.LVL8:
 140              		.loc 1 42 5 is_stmt 0 view .LVU30
 141 000a FFF7FEFF 		bl	HAL_GPIO_WritePin
 142              	.LVL9:
  43:../rms_self/src/rms_dh052.c ****     HAL_GPIO_WritePin(handle->port, handle->r_en, 0);
 143              		.loc 1 43 5 is_stmt 1 view .LVU31
 144 000e 0022     		movs	r2, #0
 145 0010 E189     		ldrh	r1, [r4, #14]
 146 0012 A068     		ldr	r0, [r4, #8]
 147 0014 FFF7FEFF 		bl	HAL_GPIO_WritePin
 148              	.LVL10:
  44:../rms_self/src/rms_dh052.c **** }
 149              		.loc 1 44 1 is_stmt 0 view .LVU32
 150 0018 10BD     		pop	{r4, pc}
 151              		.loc 1 44 1 view .LVU33
 152              		.cfi_endproc
 153              	.LFE132:
 155              		.section	.text.servo_turn_left,"ax",%progbits
 156              		.align	1
 157              		.global	servo_turn_left
 158              		.syntax unified
 159              		.thumb
 160              		.thumb_func
 162              	servo_turn_left:
 163              	.LVL11:
 164              	.LFB133:
  45:../rms_self/src/rms_dh052.c **** 
  46:../rms_self/src/rms_dh052.c **** void servo_turn_left(Motor const *handle, uint16_t pwm)
  47:../rms_self/src/rms_dh052.c **** {
 165              		.loc 1 47 1 is_stmt 1 view -0
 166              		.cfi_startproc
 167              		@ args = 0, pretend = 0, frame = 0
 168              		@ frame_needed = 0, uses_anonymous_args = 0
 169              		@ link register save eliminated.
  48:../rms_self/src/rms_dh052.c ****     __HAL_TIM_SET_COMPARE(handle->pwm_tim_h, handle->lpwm_ch, pwm);
 170              		.loc 1 48 5 view .LVU35
 171 0000 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
 172 0002 4BB9     		cbnz	r3, .L7
 173              		.loc 1 48 5 is_stmt 0 discriminator 1 view .LVU36
 174 0004 0368     		ldr	r3, [r0]
 175 0006 1B68     		ldr	r3, [r3]
 176 0008 5963     		str	r1, [r3, #52]
 177              	.L8:
  49:../rms_self/src/rms_dh052.c ****     __HAL_TIM_SET_COMPARE(handle->pwm_tim_h, handle->rpwm_ch, 0);
 178              		.loc 1 49 5 is_stmt 1 view .LVU37
 179 000a 4379     		ldrb	r3, [r0, #5]	@ zero_extendqisi2
 180 000c A3B9     		cbnz	r3, .L11
 181              		.loc 1 49 5 is_stmt 0 discriminator 1 view .LVU38
 182 000e 0368     		ldr	r3, [r0]
 183 0010 1B68     		ldr	r3, [r3]
 184 0012 0022     		movs	r2, #0
 185 0014 5A63     		str	r2, [r3, #52]
 186 0016 7047     		bx	lr
ARM GAS  /tmp/cczxgOAQ.s 			page 5


 187              	.L7:
  48:../rms_self/src/rms_dh052.c ****     __HAL_TIM_SET_COMPARE(handle->pwm_tim_h, handle->lpwm_ch, pwm);
 188              		.loc 1 48 5 discriminator 2 view .LVU39
 189 0018 042B     		cmp	r3, #4
 190 001a 05D0     		beq	.L15
  48:../rms_self/src/rms_dh052.c ****     __HAL_TIM_SET_COMPARE(handle->pwm_tim_h, handle->lpwm_ch, pwm);
 191              		.loc 1 48 5 discriminator 4 view .LVU40
 192 001c 082B     		cmp	r3, #8
 193 001e 07D0     		beq	.L16
  48:../rms_self/src/rms_dh052.c ****     __HAL_TIM_SET_COMPARE(handle->pwm_tim_h, handle->lpwm_ch, pwm);
 194              		.loc 1 48 5 discriminator 7 view .LVU41
 195 0020 0368     		ldr	r3, [r0]
 196 0022 1B68     		ldr	r3, [r3]
 197 0024 1964     		str	r1, [r3, #64]
 198 0026 F0E7     		b	.L8
 199              	.L15:
  48:../rms_self/src/rms_dh052.c ****     __HAL_TIM_SET_COMPARE(handle->pwm_tim_h, handle->lpwm_ch, pwm);
 200              		.loc 1 48 5 discriminator 3 view .LVU42
 201 0028 0368     		ldr	r3, [r0]
 202 002a 1B68     		ldr	r3, [r3]
 203 002c 9963     		str	r1, [r3, #56]
 204 002e ECE7     		b	.L8
 205              	.L16:
  48:../rms_self/src/rms_dh052.c ****     __HAL_TIM_SET_COMPARE(handle->pwm_tim_h, handle->lpwm_ch, pwm);
 206              		.loc 1 48 5 discriminator 6 view .LVU43
 207 0030 0368     		ldr	r3, [r0]
 208 0032 1B68     		ldr	r3, [r3]
 209 0034 D963     		str	r1, [r3, #60]
 210 0036 E8E7     		b	.L8
 211              	.L11:
 212              		.loc 1 49 5 discriminator 2 view .LVU44
 213 0038 042B     		cmp	r3, #4
 214 003a 06D0     		beq	.L17
 215              		.loc 1 49 5 discriminator 4 view .LVU45
 216 003c 082B     		cmp	r3, #8
 217 003e 09D0     		beq	.L18
 218              		.loc 1 49 5 discriminator 7 view .LVU46
 219 0040 0368     		ldr	r3, [r0]
 220 0042 1B68     		ldr	r3, [r3]
 221 0044 0022     		movs	r2, #0
 222 0046 1A64     		str	r2, [r3, #64]
  50:../rms_self/src/rms_dh052.c **** }
 223              		.loc 1 50 1 discriminator 7 view .LVU47
 224 0048 7047     		bx	lr
 225              	.L17:
  49:../rms_self/src/rms_dh052.c ****     __HAL_TIM_SET_COMPARE(handle->pwm_tim_h, handle->rpwm_ch, 0);
 226              		.loc 1 49 5 discriminator 3 view .LVU48
 227 004a 0368     		ldr	r3, [r0]
 228 004c 1B68     		ldr	r3, [r3]
 229 004e 0022     		movs	r2, #0
 230 0050 9A63     		str	r2, [r3, #56]
 231 0052 7047     		bx	lr
 232              	.L18:
  49:../rms_self/src/rms_dh052.c ****     __HAL_TIM_SET_COMPARE(handle->pwm_tim_h, handle->rpwm_ch, 0);
 233              		.loc 1 49 5 discriminator 6 view .LVU49
 234 0054 0368     		ldr	r3, [r0]
 235 0056 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/cczxgOAQ.s 			page 6


 236 0058 0022     		movs	r2, #0
 237 005a DA63     		str	r2, [r3, #60]
 238 005c 7047     		bx	lr
 239              		.cfi_endproc
 240              	.LFE133:
 242              		.section	.text.servo_turn_right,"ax",%progbits
 243              		.align	1
 244              		.global	servo_turn_right
 245              		.syntax unified
 246              		.thumb
 247              		.thumb_func
 249              	servo_turn_right:
 250              	.LVL12:
 251              	.LFB134:
  51:../rms_self/src/rms_dh052.c **** 
  52:../rms_self/src/rms_dh052.c **** void servo_turn_right(Motor const *handle, uint16_t pwm)
  53:../rms_self/src/rms_dh052.c **** {
 252              		.loc 1 53 1 is_stmt 1 view -0
 253              		.cfi_startproc
 254              		@ args = 0, pretend = 0, frame = 0
 255              		@ frame_needed = 0, uses_anonymous_args = 0
 256              		@ link register save eliminated.
  54:../rms_self/src/rms_dh052.c ****     __HAL_TIM_SET_COMPARE(handle->pwm_tim_h, handle->rpwm_ch, pwm);
 257              		.loc 1 54 5 view .LVU51
 258 0000 4379     		ldrb	r3, [r0, #5]	@ zero_extendqisi2
 259 0002 4BB9     		cbnz	r3, .L20
 260              		.loc 1 54 5 is_stmt 0 discriminator 1 view .LVU52
 261 0004 0368     		ldr	r3, [r0]
 262 0006 1B68     		ldr	r3, [r3]
 263 0008 5963     		str	r1, [r3, #52]
 264              	.L21:
  55:../rms_self/src/rms_dh052.c ****     __HAL_TIM_SET_COMPARE(handle->pwm_tim_h, handle->lpwm_ch, 0);
 265              		.loc 1 55 5 is_stmt 1 view .LVU53
 266 000a 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
 267 000c A3B9     		cbnz	r3, .L24
 268              		.loc 1 55 5 is_stmt 0 discriminator 1 view .LVU54
 269 000e 0368     		ldr	r3, [r0]
 270 0010 1B68     		ldr	r3, [r3]
 271 0012 0022     		movs	r2, #0
 272 0014 5A63     		str	r2, [r3, #52]
 273 0016 7047     		bx	lr
 274              	.L20:
  54:../rms_self/src/rms_dh052.c ****     __HAL_TIM_SET_COMPARE(handle->pwm_tim_h, handle->rpwm_ch, pwm);
 275              		.loc 1 54 5 discriminator 2 view .LVU55
 276 0018 042B     		cmp	r3, #4
 277 001a 05D0     		beq	.L28
  54:../rms_self/src/rms_dh052.c ****     __HAL_TIM_SET_COMPARE(handle->pwm_tim_h, handle->rpwm_ch, pwm);
 278              		.loc 1 54 5 discriminator 4 view .LVU56
 279 001c 082B     		cmp	r3, #8
 280 001e 07D0     		beq	.L29
  54:../rms_self/src/rms_dh052.c ****     __HAL_TIM_SET_COMPARE(handle->pwm_tim_h, handle->rpwm_ch, pwm);
 281              		.loc 1 54 5 discriminator 7 view .LVU57
 282 0020 0368     		ldr	r3, [r0]
 283 0022 1B68     		ldr	r3, [r3]
 284 0024 1964     		str	r1, [r3, #64]
 285 0026 F0E7     		b	.L21
 286              	.L28:
ARM GAS  /tmp/cczxgOAQ.s 			page 7


  54:../rms_self/src/rms_dh052.c ****     __HAL_TIM_SET_COMPARE(handle->pwm_tim_h, handle->rpwm_ch, pwm);
 287              		.loc 1 54 5 discriminator 3 view .LVU58
 288 0028 0368     		ldr	r3, [r0]
 289 002a 1B68     		ldr	r3, [r3]
 290 002c 9963     		str	r1, [r3, #56]
 291 002e ECE7     		b	.L21
 292              	.L29:
  54:../rms_self/src/rms_dh052.c ****     __HAL_TIM_SET_COMPARE(handle->pwm_tim_h, handle->rpwm_ch, pwm);
 293              		.loc 1 54 5 discriminator 6 view .LVU59
 294 0030 0368     		ldr	r3, [r0]
 295 0032 1B68     		ldr	r3, [r3]
 296 0034 D963     		str	r1, [r3, #60]
 297 0036 E8E7     		b	.L21
 298              	.L24:
 299              		.loc 1 55 5 discriminator 2 view .LVU60
 300 0038 042B     		cmp	r3, #4
 301 003a 06D0     		beq	.L30
 302              		.loc 1 55 5 discriminator 4 view .LVU61
 303 003c 082B     		cmp	r3, #8
 304 003e 09D0     		beq	.L31
 305              		.loc 1 55 5 discriminator 7 view .LVU62
 306 0040 0368     		ldr	r3, [r0]
 307 0042 1B68     		ldr	r3, [r3]
 308 0044 0022     		movs	r2, #0
 309 0046 1A64     		str	r2, [r3, #64]
  56:../rms_self/src/rms_dh052.c **** }
 310              		.loc 1 56 1 discriminator 7 view .LVU63
 311 0048 7047     		bx	lr
 312              	.L30:
  55:../rms_self/src/rms_dh052.c ****     __HAL_TIM_SET_COMPARE(handle->pwm_tim_h, handle->lpwm_ch, 0);
 313              		.loc 1 55 5 discriminator 3 view .LVU64
 314 004a 0368     		ldr	r3, [r0]
 315 004c 1B68     		ldr	r3, [r3]
 316 004e 0022     		movs	r2, #0
 317 0050 9A63     		str	r2, [r3, #56]
 318 0052 7047     		bx	lr
 319              	.L31:
  55:../rms_self/src/rms_dh052.c ****     __HAL_TIM_SET_COMPARE(handle->pwm_tim_h, handle->lpwm_ch, 0);
 320              		.loc 1 55 5 discriminator 6 view .LVU65
 321 0054 0368     		ldr	r3, [r0]
 322 0056 1B68     		ldr	r3, [r3]
 323 0058 0022     		movs	r2, #0
 324 005a DA63     		str	r2, [r3, #60]
 325 005c 7047     		bx	lr
 326              		.cfi_endproc
 327              	.LFE134:
 329              		.section	.text.servo_stop,"ax",%progbits
 330              		.align	1
 331              		.global	servo_stop
 332              		.syntax unified
 333              		.thumb
 334              		.thumb_func
 336              	servo_stop:
 337              	.LVL13:
 338              	.LFB135:
  57:../rms_self/src/rms_dh052.c **** 
  58:../rms_self/src/rms_dh052.c **** void servo_stop(Motor const *handle)
ARM GAS  /tmp/cczxgOAQ.s 			page 8


  59:../rms_self/src/rms_dh052.c **** {
 339              		.loc 1 59 1 is_stmt 1 view -0
 340              		.cfi_startproc
 341              		@ args = 0, pretend = 0, frame = 0
 342              		@ frame_needed = 0, uses_anonymous_args = 0
 343              		@ link register save eliminated.
  60:../rms_self/src/rms_dh052.c ****     __HAL_TIM_SET_COMPARE(handle->pwm_tim_h, handle->lpwm_ch, 0);
 344              		.loc 1 60 5 view .LVU67
 345 0000 0379     		ldrb	r3, [r0, #4]	@ zero_extendqisi2
 346 0002 53B9     		cbnz	r3, .L33
 347              		.loc 1 60 5 is_stmt 0 discriminator 1 view .LVU68
 348 0004 0368     		ldr	r3, [r0]
 349 0006 1B68     		ldr	r3, [r3]
 350 0008 0022     		movs	r2, #0
 351 000a 5A63     		str	r2, [r3, #52]
 352              	.L34:
  61:../rms_self/src/rms_dh052.c ****     __HAL_TIM_SET_COMPARE(handle->pwm_tim_h, handle->rpwm_ch, 0);
 353              		.loc 1 61 5 is_stmt 1 view .LVU69
 354 000c 4379     		ldrb	r3, [r0, #5]	@ zero_extendqisi2
 355 000e BBB9     		cbnz	r3, .L37
 356              		.loc 1 61 5 is_stmt 0 discriminator 1 view .LVU70
 357 0010 0368     		ldr	r3, [r0]
 358 0012 1B68     		ldr	r3, [r3]
 359 0014 0022     		movs	r2, #0
 360 0016 5A63     		str	r2, [r3, #52]
 361 0018 7047     		bx	lr
 362              	.L33:
  60:../rms_self/src/rms_dh052.c ****     __HAL_TIM_SET_COMPARE(handle->pwm_tim_h, handle->lpwm_ch, 0);
 363              		.loc 1 60 5 discriminator 2 view .LVU71
 364 001a 042B     		cmp	r3, #4
 365 001c 06D0     		beq	.L41
  60:../rms_self/src/rms_dh052.c ****     __HAL_TIM_SET_COMPARE(handle->pwm_tim_h, handle->lpwm_ch, 0);
 366              		.loc 1 60 5 discriminator 4 view .LVU72
 367 001e 082B     		cmp	r3, #8
 368 0020 09D0     		beq	.L42
  60:../rms_self/src/rms_dh052.c ****     __HAL_TIM_SET_COMPARE(handle->pwm_tim_h, handle->lpwm_ch, 0);
 369              		.loc 1 60 5 discriminator 7 view .LVU73
 370 0022 0368     		ldr	r3, [r0]
 371 0024 1B68     		ldr	r3, [r3]
 372 0026 0022     		movs	r2, #0
 373 0028 1A64     		str	r2, [r3, #64]
 374 002a EFE7     		b	.L34
 375              	.L41:
  60:../rms_self/src/rms_dh052.c ****     __HAL_TIM_SET_COMPARE(handle->pwm_tim_h, handle->lpwm_ch, 0);
 376              		.loc 1 60 5 discriminator 3 view .LVU74
 377 002c 0368     		ldr	r3, [r0]
 378 002e 1B68     		ldr	r3, [r3]
 379 0030 0022     		movs	r2, #0
 380 0032 9A63     		str	r2, [r3, #56]
 381 0034 EAE7     		b	.L34
 382              	.L42:
  60:../rms_self/src/rms_dh052.c ****     __HAL_TIM_SET_COMPARE(handle->pwm_tim_h, handle->lpwm_ch, 0);
 383              		.loc 1 60 5 discriminator 6 view .LVU75
 384 0036 0368     		ldr	r3, [r0]
 385 0038 1B68     		ldr	r3, [r3]
 386 003a 0022     		movs	r2, #0
 387 003c DA63     		str	r2, [r3, #60]
ARM GAS  /tmp/cczxgOAQ.s 			page 9


 388 003e E5E7     		b	.L34
 389              	.L37:
 390              		.loc 1 61 5 discriminator 2 view .LVU76
 391 0040 042B     		cmp	r3, #4
 392 0042 06D0     		beq	.L43
 393              		.loc 1 61 5 discriminator 4 view .LVU77
 394 0044 082B     		cmp	r3, #8
 395 0046 09D0     		beq	.L44
 396              		.loc 1 61 5 discriminator 7 view .LVU78
 397 0048 0368     		ldr	r3, [r0]
 398 004a 1B68     		ldr	r3, [r3]
 399 004c 0022     		movs	r2, #0
 400 004e 1A64     		str	r2, [r3, #64]
  62:../rms_self/src/rms_dh052.c **** }
 401              		.loc 1 62 1 discriminator 7 view .LVU79
 402 0050 7047     		bx	lr
 403              	.L43:
  61:../rms_self/src/rms_dh052.c ****     __HAL_TIM_SET_COMPARE(handle->pwm_tim_h, handle->rpwm_ch, 0);
 404              		.loc 1 61 5 discriminator 3 view .LVU80
 405 0052 0368     		ldr	r3, [r0]
 406 0054 1B68     		ldr	r3, [r3]
 407 0056 0022     		movs	r2, #0
 408 0058 9A63     		str	r2, [r3, #56]
 409 005a 7047     		bx	lr
 410              	.L44:
  61:../rms_self/src/rms_dh052.c ****     __HAL_TIM_SET_COMPARE(handle->pwm_tim_h, handle->rpwm_ch, 0);
 411              		.loc 1 61 5 discriminator 6 view .LVU81
 412 005c 0368     		ldr	r3, [r0]
 413 005e 1B68     		ldr	r3, [r3]
 414 0060 0022     		movs	r2, #0
 415 0062 DA63     		str	r2, [r3, #60]
 416 0064 7047     		bx	lr
 417              		.cfi_endproc
 418              	.LFE135:
 420              		.section	.text.servo_encoder_count,"ax",%progbits
 421              		.align	1
 422              		.global	servo_encoder_count
 423              		.syntax unified
 424              		.thumb
 425              		.thumb_func
 427              	servo_encoder_count:
 428              	.LVL14:
 429              	.LFB136:
  63:../rms_self/src/rms_dh052.c **** 
  64:../rms_self/src/rms_dh052.c **** int32_t servo_encoder_count(Motor const *handle)
  65:../rms_self/src/rms_dh052.c **** {
 430              		.loc 1 65 1 is_stmt 1 view -0
 431              		.cfi_startproc
 432              		@ args = 0, pretend = 0, frame = 0
 433              		@ frame_needed = 0, uses_anonymous_args = 0
 434              		@ link register save eliminated.
  66:../rms_self/src/rms_dh052.c ****     int32_t c32 =  ((volatile int32_t)handle->enc_tim_h->Instance->CNT / 4) - HALF_PERIOD;
 435              		.loc 1 66 5 view .LVU83
 436              		.loc 1 66 45 is_stmt 0 view .LVU84
 437 0000 0369     		ldr	r3, [r0, #16]
 438              		.loc 1 66 56 view .LVU85
 439 0002 1B68     		ldr	r3, [r3]
ARM GAS  /tmp/cczxgOAQ.s 			page 10


 440              		.loc 1 66 66 view .LVU86
 441 0004 5A6A     		ldr	r2, [r3, #36]
 442              		.loc 1 66 72 view .LVU87
 443 0006 1346     		mov	r3, r2
 444 0008 002A     		cmp	r2, #0
 445 000a 1BDB     		blt	.L48
 446              	.L46:
 447 000c 9B10     		asrs	r3, r3, #2
 448              		.loc 1 66 13 view .LVU88
 449 000e A3F50053 		sub	r3, r3, #8192
 450              	.LVL15:
  67:../rms_self/src/rms_dh052.c ****     int32_t dif = c32 - g_prev; 
 451              		.loc 1 67 5 is_stmt 1 view .LVU89
 452              		.loc 1 67 23 is_stmt 0 view .LVU90
 453 0012 0D4A     		ldr	r2, .L49
 454 0014 1068     		ldr	r0, [r2]
 455              	.LVL16:
 456              		.loc 1 67 13 view .LVU91
 457 0016 1B1A     		subs	r3, r3, r0
 458              	.LVL17:
  68:../rms_self/src/rms_dh052.c **** 
  69:../rms_self/src/rms_dh052.c ****     int32_t mod_dif = ((dif + HALF_PERIOD) % ONE_PERIOD) - HALF_PERIOD;
 459              		.loc 1 69 5 is_stmt 1 view .LVU92
 460              		.loc 1 69 29 is_stmt 0 view .LVU93
 461 0018 03F50052 		add	r2, r3, #8192
 462              		.loc 1 69 44 view .LVU94
 463 001c 5142     		rsbs	r1, r2, #0
 464 001e C2F30D02 		ubfx	r2, r2, #0, #14
 465 0022 C1F30D01 		ubfx	r1, r1, #0, #14
 466 0026 58BF     		it	pl
 467 0028 4A42     		rsbpl	r2, r1, #0
 468              		.loc 1 69 13 view .LVU95
 469 002a A2F50051 		sub	r1, r2, #8192
 470              	.LVL18:
  70:../rms_self/src/rms_dh052.c ****     if(dif < -HALF_PERIOD)
 471              		.loc 1 70 5 is_stmt 1 view .LVU96
 472              		.loc 1 70 7 is_stmt 0 view .LVU97
 473 002e 13F5005F 		cmn	r3, #8192
 474 0032 01DA     		bge	.L47
  71:../rms_self/src/rms_dh052.c ****         mod_dif += ONE_PERIOD; 
 475              		.loc 1 71 9 is_stmt 1 view .LVU98
 476              		.loc 1 71 17 is_stmt 0 view .LVU99
 477 0034 02F50051 		add	r1, r2, #8192
 478              	.LVL19:
 479              	.L47:
  72:../rms_self/src/rms_dh052.c **** 
  73:../rms_self/src/rms_dh052.c ****     int32_t unwrapped = g_prev + mod_dif;
 480              		.loc 1 73 5 is_stmt 1 view .LVU100
 481              		.loc 1 73 13 is_stmt 0 view .LVU101
 482 0038 0844     		add	r0, r0, r1
 483              	.LVL20:
  74:../rms_self/src/rms_dh052.c ****     g_prev = unwrapped; //load previous value
 484              		.loc 1 74 5 is_stmt 1 view .LVU102
 485              		.loc 1 74 12 is_stmt 0 view .LVU103
 486 003a 034B     		ldr	r3, .L49
 487              	.LVL21:
 488              		.loc 1 74 12 view .LVU104
ARM GAS  /tmp/cczxgOAQ.s 			page 11


 489 003c 1860     		str	r0, [r3]
  75:../rms_self/src/rms_dh052.c **** 
  76:../rms_self/src/rms_dh052.c ****     // NO PRECAUTIONS TAKEN TO DEAL WITH BUFFER OVERFLOW FOR NOW!
  77:../rms_self/src/rms_dh052.c ****     return unwrapped + HALF_PERIOD;
 490              		.loc 1 77 5 is_stmt 1 view .LVU105
  78:../rms_self/src/rms_dh052.c **** }
 491              		.loc 1 78 1 is_stmt 0 view .LVU106
 492 003e 00F50050 		add	r0, r0, #8192
 493              	.LVL22:
 494              		.loc 1 78 1 view .LVU107
 495 0042 7047     		bx	lr
 496              	.LVL23:
 497              	.L48:
  66:../rms_self/src/rms_dh052.c ****     int32_t dif = c32 - g_prev; 
 498              		.loc 1 66 72 view .LVU108
 499 0044 D31C     		adds	r3, r2, #3
 500 0046 E1E7     		b	.L46
 501              	.L50:
 502              		.align	2
 503              	.L49:
 504 0048 00000000 		.word	.LANCHOR0
 505              		.cfi_endproc
 506              	.LFE136:
 508              		.section	.text.servo_rpm,"ax",%progbits
 509              		.align	1
 510              		.global	servo_rpm
 511              		.syntax unified
 512              		.thumb
 513              		.thumb_func
 515              	servo_rpm:
 516              	.LVL24:
 517              	.LFB137:
  79:../rms_self/src/rms_dh052.c **** 
  80:../rms_self/src/rms_dh052.c **** uint16_t servo_rpm(Motor *handle)
  81:../rms_self/src/rms_dh052.c **** {
 518              		.loc 1 81 1 is_stmt 1 view -0
 519              		.cfi_startproc
 520              		@ args = 0, pretend = 0, frame = 0
 521              		@ frame_needed = 0, uses_anonymous_args = 0
 522              		@ link register save eliminated.
  82:../rms_self/src/rms_dh052.c ****     return g_rpm;
 523              		.loc 1 82 5 view .LVU110
  83:../rms_self/src/rms_dh052.c **** }
 524              		.loc 1 83 1 is_stmt 0 view .LVU111
 525 0000 014B     		ldr	r3, .L52
 526 0002 1888     		ldrh	r0, [r3]
 527              	.LVL25:
 528              		.loc 1 83 1 view .LVU112
 529 0004 7047     		bx	lr
 530              	.L53:
 531 0006 00BF     		.align	2
 532              	.L52:
 533 0008 00000000 		.word	.LANCHOR1
 534              		.cfi_endproc
 535              	.LFE137:
 537              		.section	.text.HAL_TIM_IC_CaptureCallback,"ax",%progbits
 538              		.align	1
ARM GAS  /tmp/cczxgOAQ.s 			page 12


 539              		.global	HAL_TIM_IC_CaptureCallback
 540              		.syntax unified
 541              		.thumb
 542              		.thumb_func
 544              	HAL_TIM_IC_CaptureCallback:
 545              	.LVL26:
 546              	.LFB138:
  84:../rms_self/src/rms_dh052.c **** 
  85:../rms_self/src/rms_dh052.c **** void HAL_TIM_IC_CaptureCallback(TIM_HandleTypeDef *htim)
  86:../rms_self/src/rms_dh052.c **** {
 547              		.loc 1 86 1 is_stmt 1 view -0
 548              		.cfi_startproc
 549              		@ args = 0, pretend = 0, frame = 0
 550              		@ frame_needed = 0, uses_anonymous_args = 0
  87:../rms_self/src/rms_dh052.c ****     if (htim == &htim4 && htim->Channel == HAL_TIM_ACTIVE_CHANNEL_1)
 551              		.loc 1 87 5 view .LVU114
 552              		.loc 1 87 8 is_stmt 0 view .LVU115
 553 0000 354B     		ldr	r3, .L65
 554 0002 9842     		cmp	r0, r3
 555 0004 00D0     		beq	.L63
 556 0006 7047     		bx	lr
 557              	.L63:
  86:../rms_self/src/rms_dh052.c ****     if (htim == &htim4 && htim->Channel == HAL_TIM_ACTIVE_CHANNEL_1)
 558              		.loc 1 86 1 discriminator 1 view .LVU116
 559 0008 10B5     		push	{r4, lr}
 560              	.LCFI2:
 561              		.cfi_def_cfa_offset 8
 562              		.cfi_offset 4, -8
 563              		.cfi_offset 14, -4
 564 000a 0446     		mov	r4, r0
 565              		.loc 1 87 31 discriminator 1 view .LVU117
 566 000c 037F     		ldrb	r3, [r0, #28]	@ zero_extendqisi2
 567              		.loc 1 87 24 discriminator 1 view .LVU118
 568 000e 012B     		cmp	r3, #1
 569 0010 00D0     		beq	.L64
 570              	.LVL27:
 571              	.L54:
  88:../rms_self/src/rms_dh052.c ****     {
  89:../rms_self/src/rms_dh052.c ****         if (g_ic_state == IDLE)
  90:../rms_self/src/rms_dh052.c ****         {
  91:../rms_self/src/rms_dh052.c ****             HAL_GPIO_WritePin(LED1_GPIO_Port, LED1_Pin, 1);
  92:../rms_self/src/rms_dh052.c ****             g_ts1 = HAL_TIM_ReadCapturedValue(htim, TIM_CHANNEL_1); // read the first value
  93:../rms_self/src/rms_dh052.c ****             g_ic_state = BUSY;  // set the first captured as true
  94:../rms_self/src/rms_dh052.c ****         }
  95:../rms_self/src/rms_dh052.c ****         else   // If the first rising edge is captured, now we will capture the second edge
  96:../rms_self/src/rms_dh052.c ****         {
  97:../rms_self/src/rms_dh052.c ****             HAL_GPIO_WritePin(LED1_GPIO_Port, LED1_Pin, 0);
  98:../rms_self/src/rms_dh052.c ****             g_ts2 = HAL_TIM_ReadCapturedValue(htim, TIM_CHANNEL_1);  // read second value
  99:../rms_self/src/rms_dh052.c **** 
 100:../rms_self/src/rms_dh052.c ****             if (g_ts2 > g_ts1)
 101:../rms_self/src/rms_dh052.c ****             {
 102:../rms_self/src/rms_dh052.c ****                 g_dif = g_ts2 - g_ts1;
 103:../rms_self/src/rms_dh052.c ****             }
 104:../rms_self/src/rms_dh052.c ****             else if (g_ts1 > g_ts2)
 105:../rms_self/src/rms_dh052.c ****             {
 106:../rms_self/src/rms_dh052.c ****                 g_dif = (0xffff - g_ts1) + g_ts2;
 107:../rms_self/src/rms_dh052.c ****             }
ARM GAS  /tmp/cczxgOAQ.s 			page 13


 108:../rms_self/src/rms_dh052.c **** 
 109:../rms_self/src/rms_dh052.c ****             g_rpm = MIN_TO_MS / (g_dif * 1000 * 0.0005f);
 110:../rms_self/src/rms_dh052.c **** 
 111:../rms_self/src/rms_dh052.c ****             __HAL_TIM_SET_COUNTER(htim, 0);  // reset the counter
 112:../rms_self/src/rms_dh052.c ****             g_ic_state = IDLE; // set it back to false
 113:../rms_self/src/rms_dh052.c ****         }
 114:../rms_self/src/rms_dh052.c ****     }
 115:../rms_self/src/rms_dh052.c **** }...
 572              		.loc 1 115 1 view .LVU119
 573 0012 10BD     		pop	{r4, pc}
 574              	.LVL28:
 575              	.L64:
  89:../rms_self/src/rms_dh052.c ****         if (g_ic_state == IDLE)
 576              		.loc 1 89 9 is_stmt 1 view .LVU120
  89:../rms_self/src/rms_dh052.c ****         if (g_ic_state == IDLE)
 577              		.loc 1 89 24 is_stmt 0 view .LVU121
 578 0014 314B     		ldr	r3, .L65+4
 579 0016 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
  89:../rms_self/src/rms_dh052.c ****         if (g_ic_state == IDLE)
 580              		.loc 1 89 12 view .LVU122
 581 0018 83B9     		cbnz	r3, .L56
  91:../rms_self/src/rms_dh052.c ****             HAL_GPIO_WritePin(LED1_GPIO_Port, LED1_Pin, 1);
 582              		.loc 1 91 13 is_stmt 1 view .LVU123
 583 001a 0122     		movs	r2, #1
 584 001c 4FF40051 		mov	r1, #8192
 585 0020 2F48     		ldr	r0, .L65+8
 586              	.LVL29:
  91:../rms_self/src/rms_dh052.c ****             HAL_GPIO_WritePin(LED1_GPIO_Port, LED1_Pin, 1);
 587              		.loc 1 91 13 is_stmt 0 view .LVU124
 588 0022 FFF7FEFF 		bl	HAL_GPIO_WritePin
 589              	.LVL30:
  92:../rms_self/src/rms_dh052.c ****             g_ts1 = HAL_TIM_ReadCapturedValue(htim, TIM_CHANNEL_1); // read the first value
 590              		.loc 1 92 13 is_stmt 1 view .LVU125
  92:../rms_self/src/rms_dh052.c ****             g_ts1 = HAL_TIM_ReadCapturedValue(htim, TIM_CHANNEL_1); // read the first value
 591              		.loc 1 92 21 is_stmt 0 view .LVU126
 592 0026 0021     		movs	r1, #0
 593 0028 2046     		mov	r0, r4
 594 002a FFF7FEFF 		bl	HAL_TIM_ReadCapturedValue
 595              	.LVL31:
  92:../rms_self/src/rms_dh052.c ****             g_ts1 = HAL_TIM_ReadCapturedValue(htim, TIM_CHANNEL_1); // read the first value
 596              		.loc 1 92 19 view .LVU127
 597 002e 80B2     		uxth	r0, r0
 598 0030 2C4B     		ldr	r3, .L65+12
 599 0032 1880     		strh	r0, [r3]	@ movhi
  93:../rms_self/src/rms_dh052.c ****             g_ic_state = BUSY;  // set the first captured as true
 600              		.loc 1 93 13 is_stmt 1 view .LVU128
  93:../rms_self/src/rms_dh052.c ****             g_ic_state = BUSY;  // set the first captured as true
 601              		.loc 1 93 24 is_stmt 0 view .LVU129
 602 0034 294B     		ldr	r3, .L65+4
 603 0036 0122     		movs	r2, #1
 604 0038 1A70     		strb	r2, [r3]
 605 003a EAE7     		b	.L54
 606              	.LVL32:
 607              	.L56:
  97:../rms_self/src/rms_dh052.c ****             HAL_GPIO_WritePin(LED1_GPIO_Port, LED1_Pin, 0);
 608              		.loc 1 97 13 is_stmt 1 view .LVU130
 609 003c 0022     		movs	r2, #0
ARM GAS  /tmp/cczxgOAQ.s 			page 14


 610 003e 4FF40051 		mov	r1, #8192
 611 0042 2748     		ldr	r0, .L65+8
 612              	.LVL33:
  97:../rms_self/src/rms_dh052.c ****             HAL_GPIO_WritePin(LED1_GPIO_Port, LED1_Pin, 0);
 613              		.loc 1 97 13 is_stmt 0 view .LVU131
 614 0044 FFF7FEFF 		bl	HAL_GPIO_WritePin
 615              	.LVL34:
  98:../rms_self/src/rms_dh052.c ****             g_ts2 = HAL_TIM_ReadCapturedValue(htim, TIM_CHANNEL_1);  // read second value
 616              		.loc 1 98 13 is_stmt 1 view .LVU132
  98:../rms_self/src/rms_dh052.c ****             g_ts2 = HAL_TIM_ReadCapturedValue(htim, TIM_CHANNEL_1);  // read second value
 617              		.loc 1 98 21 is_stmt 0 view .LVU133
 618 0048 0021     		movs	r1, #0
 619 004a 2046     		mov	r0, r4
 620 004c FFF7FEFF 		bl	HAL_TIM_ReadCapturedValue
 621              	.LVL35:
  98:../rms_self/src/rms_dh052.c ****             g_ts2 = HAL_TIM_ReadCapturedValue(htim, TIM_CHANNEL_1);  // read second value
 622              		.loc 1 98 19 view .LVU134
 623 0050 80B2     		uxth	r0, r0
 624 0052 254B     		ldr	r3, .L65+16
 625 0054 1880     		strh	r0, [r3]	@ movhi
 100:../rms_self/src/rms_dh052.c ****             if (g_ts2 > g_ts1)
 626              		.loc 1 100 13 is_stmt 1 view .LVU135
 100:../rms_self/src/rms_dh052.c ****             if (g_ts2 > g_ts1)
 627              		.loc 1 100 23 is_stmt 0 view .LVU136
 628 0056 1A88     		ldrh	r2, [r3]
 629 0058 92B2     		uxth	r2, r2
 630 005a 224B     		ldr	r3, .L65+12
 631 005c 1B88     		ldrh	r3, [r3]
 632 005e 9BB2     		uxth	r3, r3
 100:../rms_self/src/rms_dh052.c ****             if (g_ts2 > g_ts1)
 633              		.loc 1 100 16 view .LVU137
 634 0060 9A42     		cmp	r2, r3
 635 0062 26D9     		bls	.L57
 102:../rms_self/src/rms_dh052.c ****                 g_dif = g_ts2 - g_ts1;
 636              		.loc 1 102 17 is_stmt 1 view .LVU138
 102:../rms_self/src/rms_dh052.c ****                 g_dif = g_ts2 - g_ts1;
 637              		.loc 1 102 31 is_stmt 0 view .LVU139
 638 0064 204B     		ldr	r3, .L65+16
 639 0066 1B88     		ldrh	r3, [r3]
 640 0068 9BB2     		uxth	r3, r3
 641 006a 1E4A     		ldr	r2, .L65+12
 642 006c 1288     		ldrh	r2, [r2]
 643 006e 92B2     		uxth	r2, r2
 644 0070 9B1A     		subs	r3, r3, r2
 102:../rms_self/src/rms_dh052.c ****                 g_dif = g_ts2 - g_ts1;
 645              		.loc 1 102 23 view .LVU140
 646 0072 1E4A     		ldr	r2, .L65+20
 647 0074 1380     		strh	r3, [r2]	@ movhi
 648              	.L58:
 109:../rms_self/src/rms_dh052.c ****             g_rpm = MIN_TO_MS / (g_dif * 1000 * 0.0005f);
 649              		.loc 1 109 13 is_stmt 1 view .LVU141
 109:../rms_self/src/rms_dh052.c ****             g_rpm = MIN_TO_MS / (g_dif * 1000 * 0.0005f);
 650              		.loc 1 109 40 is_stmt 0 view .LVU142
 651 0076 1D4B     		ldr	r3, .L65+20
 652 0078 1B88     		ldrh	r3, [r3]
 653 007a 4FF47A72 		mov	r2, #1000
 654 007e 02FB03F3 		mul	r3, r2, r3
ARM GAS  /tmp/cczxgOAQ.s 			page 15


 655 0082 07EE903A 		vmov	s15, r3	@ int
 109:../rms_self/src/rms_dh052.c ****             g_rpm = MIN_TO_MS / (g_dif * 1000 * 0.0005f);
 656              		.loc 1 109 47 view .LVU143
 657 0086 F8EEE77A 		vcvt.f32.s32	s15, s15
 658 008a 9FED197A 		vldr.32	s14, .L65+24
 659 008e 67EE877A 		vmul.f32	s15, s15, s14
 109:../rms_self/src/rms_dh052.c ****             g_rpm = MIN_TO_MS / (g_dif * 1000 * 0.0005f);
 660              		.loc 1 109 31 view .LVU144
 661 0092 DFED186A 		vldr.32	s13, .L65+28
 662 0096 86EEA77A 		vdiv.f32	s14, s13, s15
 109:../rms_self/src/rms_dh052.c ****             g_rpm = MIN_TO_MS / (g_dif * 1000 * 0.0005f);
 663              		.loc 1 109 19 view .LVU145
 664 009a BCEEC77A 		vcvt.u32.f32	s14, s14
 665 009e 164B     		ldr	r3, .L65+32
 666 00a0 17EE102A 		vmov	r2, s14	@ int
 667 00a4 1A80     		strh	r2, [r3]	@ movhi
 111:../rms_self/src/rms_dh052.c ****             __HAL_TIM_SET_COUNTER(htim, 0);  // reset the counter
 668              		.loc 1 111 13 is_stmt 1 view .LVU146
 669 00a6 2268     		ldr	r2, [r4]
 670 00a8 0023     		movs	r3, #0
 671 00aa 5362     		str	r3, [r2, #36]
 112:../rms_self/src/rms_dh052.c ****             g_ic_state = IDLE; // set it back to false
 672              		.loc 1 112 13 view .LVU147
 112:../rms_self/src/rms_dh052.c ****             g_ic_state = IDLE; // set it back to false
 673              		.loc 1 112 24 is_stmt 0 view .LVU148
 674 00ac 0B4A     		ldr	r2, .L65+4
 675 00ae 1370     		strb	r3, [r2]
 676              		.loc 1 115 1 view .LVU149
 677 00b0 AFE7     		b	.L54
 678              	.L57:
 104:../rms_self/src/rms_dh052.c ****             else if (g_ts1 > g_ts2)
 679              		.loc 1 104 18 is_stmt 1 view .LVU150
 104:../rms_self/src/rms_dh052.c ****             else if (g_ts1 > g_ts2)
 680              		.loc 1 104 28 is_stmt 0 view .LVU151
 681 00b2 0C4B     		ldr	r3, .L65+12
 682 00b4 1A88     		ldrh	r2, [r3]
 683 00b6 92B2     		uxth	r2, r2
 684 00b8 0B4B     		ldr	r3, .L65+16
 685 00ba 1B88     		ldrh	r3, [r3]
 686 00bc 9BB2     		uxth	r3, r3
 104:../rms_self/src/rms_dh052.c ****             else if (g_ts1 > g_ts2)
 687              		.loc 1 104 21 view .LVU152
 688 00be 9A42     		cmp	r2, r3
 689 00c0 D9D9     		bls	.L58
 106:../rms_self/src/rms_dh052.c ****                 g_dif = (0xffff - g_ts1) + g_ts2;
 690              		.loc 1 106 17 is_stmt 1 view .LVU153
 106:../rms_self/src/rms_dh052.c ****                 g_dif = (0xffff - g_ts1) + g_ts2;
 691              		.loc 1 106 42 is_stmt 0 view .LVU154
 692 00c2 094B     		ldr	r3, .L65+16
 693 00c4 1B88     		ldrh	r3, [r3]
 694 00c6 9BB2     		uxth	r3, r3
 695 00c8 064A     		ldr	r2, .L65+12
 696 00ca 1288     		ldrh	r2, [r2]
 697 00cc 92B2     		uxth	r2, r2
 698 00ce 9B1A     		subs	r3, r3, r2
 699 00d0 013B     		subs	r3, r3, #1
 106:../rms_self/src/rms_dh052.c ****                 g_dif = (0xffff - g_ts1) + g_ts2;
ARM GAS  /tmp/cczxgOAQ.s 			page 16


 700              		.loc 1 106 23 view .LVU155
 701 00d2 064A     		ldr	r2, .L65+20
 702 00d4 1380     		strh	r3, [r2]	@ movhi
 703 00d6 CEE7     		b	.L58
 704              	.L66:
 705              		.align	2
 706              	.L65:
 707 00d8 00000000 		.word	htim4
 708 00dc 00000000 		.word	.LANCHOR2
 709 00e0 00180240 		.word	1073879040
 710 00e4 00000000 		.word	.LANCHOR3
 711 00e8 00000000 		.word	.LANCHOR4
 712 00ec 00000000 		.word	.LANCHOR5
 713 00f0 6F12033A 		.word	973279855
 714 00f4 00606A47 		.word	1198153728
 715 00f8 00000000 		.word	.LANCHOR1
 716              		.cfi_endproc
 717              	.LFE138:
 719              		.section	.bss.g_dif,"aw",%nobits
 720              		.align	1
 721              		.set	.LANCHOR5,. + 0
 724              	g_dif:
 725 0000 0000     		.space	2
 726              		.section	.bss.g_ic_state,"aw",%nobits
 727              		.set	.LANCHOR2,. + 0
 730              	g_ic_state:
 731 0000 00       		.space	1
 732              		.section	.bss.g_prev,"aw",%nobits
 733              		.align	2
 734              		.set	.LANCHOR0,. + 0
 737              	g_prev:
 738 0000 00000000 		.space	4
 739              		.section	.bss.g_rpm,"aw",%nobits
 740              		.align	1
 741              		.set	.LANCHOR1,. + 0
 744              	g_rpm:
 745 0000 0000     		.space	2
 746              		.section	.bss.g_ts1,"aw",%nobits
 747              		.align	1
 748              		.set	.LANCHOR3,. + 0
 751              	g_ts1:
 752 0000 0000     		.space	2
 753              		.section	.bss.g_ts2,"aw",%nobits
 754              		.align	1
 755              		.set	.LANCHOR4,. + 0
 758              	g_ts2:
 759 0000 0000     		.space	2
 760              		.text
 761              	.Letext0:
 762              		.file 2 "/opt/arm-gcc/arm-none-eabi/include/machine/_default_types.h"
 763              		.file 3 "/opt/arm-gcc/arm-none-eabi/include/sys/_stdint.h"
 764              		.file 4 "Drivers/CMSIS/Device/ST/STM32F4xx/Include/stm32f429xx.h"
 765              		.file 5 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 766              		.file 6 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 767              		.file 7 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_tim.h"
 768              		.file 8 "../rms_self/inc/dh052_internal.h"
 769              		.file 9 "Core/Inc/tim.h"
ARM GAS  /tmp/cczxgOAQ.s 			page 17


 770              		.file 10 "Drivers/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_gpio.h"
ARM GAS  /tmp/cczxgOAQ.s 			page 18


DEFINED SYMBOLS
                            *ABS*:0000000000000000 rms_dh052.c
     /tmp/cczxgOAQ.s:20     .text.servo_Init:0000000000000000 $t
     /tmp/cczxgOAQ.s:26     .text.servo_Init:0000000000000000 servo_Init
     /tmp/cczxgOAQ.s:74     .text.servo_enable:0000000000000000 $t
     /tmp/cczxgOAQ.s:80     .text.servo_enable:0000000000000000 servo_enable
     /tmp/cczxgOAQ.s:115    .text.servo_disable:0000000000000000 $t
     /tmp/cczxgOAQ.s:121    .text.servo_disable:0000000000000000 servo_disable
     /tmp/cczxgOAQ.s:156    .text.servo_turn_left:0000000000000000 $t
     /tmp/cczxgOAQ.s:162    .text.servo_turn_left:0000000000000000 servo_turn_left
     /tmp/cczxgOAQ.s:243    .text.servo_turn_right:0000000000000000 $t
     /tmp/cczxgOAQ.s:249    .text.servo_turn_right:0000000000000000 servo_turn_right
     /tmp/cczxgOAQ.s:330    .text.servo_stop:0000000000000000 $t
     /tmp/cczxgOAQ.s:336    .text.servo_stop:0000000000000000 servo_stop
     /tmp/cczxgOAQ.s:421    .text.servo_encoder_count:0000000000000000 $t
     /tmp/cczxgOAQ.s:427    .text.servo_encoder_count:0000000000000000 servo_encoder_count
     /tmp/cczxgOAQ.s:504    .text.servo_encoder_count:0000000000000048 $d
     /tmp/cczxgOAQ.s:509    .text.servo_rpm:0000000000000000 $t
     /tmp/cczxgOAQ.s:515    .text.servo_rpm:0000000000000000 servo_rpm
     /tmp/cczxgOAQ.s:533    .text.servo_rpm:0000000000000008 $d
     /tmp/cczxgOAQ.s:538    .text.HAL_TIM_IC_CaptureCallback:0000000000000000 $t
     /tmp/cczxgOAQ.s:544    .text.HAL_TIM_IC_CaptureCallback:0000000000000000 HAL_TIM_IC_CaptureCallback
     /tmp/cczxgOAQ.s:707    .text.HAL_TIM_IC_CaptureCallback:00000000000000d8 $d
     /tmp/cczxgOAQ.s:720    .bss.g_dif:0000000000000000 $d
     /tmp/cczxgOAQ.s:724    .bss.g_dif:0000000000000000 g_dif
     /tmp/cczxgOAQ.s:730    .bss.g_ic_state:0000000000000000 g_ic_state
     /tmp/cczxgOAQ.s:731    .bss.g_ic_state:0000000000000000 $d
     /tmp/cczxgOAQ.s:733    .bss.g_prev:0000000000000000 $d
     /tmp/cczxgOAQ.s:737    .bss.g_prev:0000000000000000 g_prev
     /tmp/cczxgOAQ.s:740    .bss.g_rpm:0000000000000000 $d
     /tmp/cczxgOAQ.s:744    .bss.g_rpm:0000000000000000 g_rpm
     /tmp/cczxgOAQ.s:747    .bss.g_ts1:0000000000000000 $d
     /tmp/cczxgOAQ.s:751    .bss.g_ts1:0000000000000000 g_ts1
     /tmp/cczxgOAQ.s:754    .bss.g_ts2:0000000000000000 $d
     /tmp/cczxgOAQ.s:758    .bss.g_ts2:0000000000000000 g_ts2

UNDEFINED SYMBOLS
HAL_GPIO_WritePin
HAL_TIM_ReadCapturedValue
htim4
